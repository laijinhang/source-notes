# 一、数据结构
### 1. 结构
```go
type Once struct {
    /*
        0 表示未执行
        1 表示已执行，只有第一次执行f完之后才将其设为1，没有执行完之前使用互斥锁保证只有一个在执行
    */
	done uint32 
	m    Mutex
}
```

# 二、源码分析
这一块内容是比较简单的，Once结构体只有一个向外暴露的接口

工作原理：
1. 原子加载读取done值
    如果是1，则直接返回
    如果是0，使用互斥加锁，使得只有一个协程能够去执行这个函数，
        之后再判断以下done的值，如果为0，表示没有被执行过，如果是1，则在第一次未执行完前，又有其它协程尝试执行，
        在第一次执行完之后，使用原子操作，将done的值设为1，然后解锁